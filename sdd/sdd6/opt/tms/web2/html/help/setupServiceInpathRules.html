<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=ISO-8859-1" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <!-- MOTW-DISABLED saved from url=(0014)about:internet -->
    <title>Configuring In-Path Rules</title>
    <link rel="StyleSheet" href="css/in-path-rules.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" />
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/context.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/towwhdir.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/wwhpagef.js"></script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        var  WebWorksRootPath = "";
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        // Set reference to top level help frame
        //
        var  WWHFrame = WWHGetWWHFrame("", true);
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2" src="scripts/expand.js"></script>
  </head>
  <body onload="WWHUpdate();" onunload="WWHUnload();" onkeydown="WWHHandleKeyDown((document.all||document.getElementById||document.layers)?event:null);" onkeypress="WWHHandleKeyPress((document.all||document.getElementById||document.layers)?event:null);" onkeyup="WWHHandleKeyUp((document.all||document.getElementById||document.layers)?event:null);">
    <br />
    <div class="WebWorks_Breadcrumbs" style="text-align: left;">
      <a class="WebWorks_Breadcrumb_Link" href="in-path-rules.04.1.html#322503">Chapter 2	Configuring In-Path Rules</a> : Configuring In-Path Rules</div>
    <hr align="left" />
    <blockquote>
      <div class="Heading1Topic"><a name="322503">Configuring In-Path Rules</a></div>
      <div class="Body"><a name="322504">You can review, add, edit, and remove in-path rules in the Configure &gt; Optimization &gt; In-Path Rules page. </a>The In-Path Rules table lists the order and properties of the rules set for the running configuration. </div>
      <div class="Body"><a name="322508">For an overview of in-path rules, see </a><span class="xref"><a href="javascript:WWHClickedPopup('cx_test', 'in-path-rules.04.2.html#322414', '');" title="In-Path Rules Overview">In-Path Rules Overview</a></span>.</div>
      <div class="HeadingProcedure"><a name="322509">To configure in-path rules</a></div>
      <div class="Step1_outer" style="margin-left: 0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="Step1_inner" style="width: 16.128pt; white-space: nowrap;">
                <span class="Bold">1.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="Step1_inner"><a name="322510">Choose Configure &gt; Optimization &gt; In-Path Rules to display the In-Path Rules page. </a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="Step_outer" style="margin-left: 0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="Step_inner" style="width: 16.128pt; white-space: nowrap;">
                <span class="Bold">2.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="Step_inner"><a name="322515">Configure the rules as described in the following table. </a></div>
            </td>
          </tr>
        </table>
      </div>
      <table class="RegularTable" style="text-align: left; width: 468.12528pt" cellspacing="0" summary="">
        <caption>
          <div class="CellBodyRight"><a name="375044">&nbsp;</a></div>
        </caption>
        <tr>
          <td style="background-color: #ADBDF2; border-right-color: none; border-right-style: none; border-right-width: 0.0pt; border-top-color: #000000; border-top-style: solid; border-top-width: 1px; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 145.23264pt">
            <div class="CellHeading"><a name="374552">Control</a></div>
          </td>
          <td style="background-color: #ADBDF2; border-left-color: none; border-left-style: none; border-left-width: 0.0pt; border-top-color: #000000; border-top-style: solid; border-top-width: 1px; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 322.89264pt">
            <div class="CellHeading"><a name="374554">Description</a></div>
          </td>
        </tr>
        <tr>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 1px; border-right-color: none; border-right-style: none; border-right-width: 0.0pt; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top">
            <div class="CellBody"><a name="374556">Add a New In-Path Rule</a></div>
          </td>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 1px; border-left-color: none; border-left-style: none; border-left-width: 0.0pt; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top">
            <div class="CellBody"><a name="374558">Displays the controls for adding a new rule.</a></div>
          </td>
        </tr>
        <tr>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 1px; border-right-color: none; border-right-style: none; border-right-width: 0.0pt; border-top-color: #000000; border-top-style: solid; border-top-width: 1px; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top">
            <div class="CellBody"><a name="374561">Type</a></div>
          </td>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 1px; border-left-color: none; border-left-style: none; border-left-width: 0.0pt; border-top-color: #000000; border-top-style: solid; border-top-width: 1px; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top">
            <div class="CellBody"><a name="374563">Select one of the following rule types from the drop-down list:</a></div>
            <li class="CellBullet"><span class="Bold"><a name="374566">Auto-Discover</a></span><span class="Bold" style="font-weight: normal"> - </span>Uses the auto-discovery process to determine if a remote Steelhead appliance is able to optimize the connection attempting to be created by this SYN packet. By default, auto-discover is applied to all IP addresses and ports that are not secure, interactive, or default Riverbed ports. Defining in-path rules modifies this default setting. </li>
            <li class="CellBullet"><span class="Bold"><a name="374578">Fixed-Target</a></span><span class="Bold" style="font-weight: normal"> - </span>Skips the auto-discovery process and uses a specified remote Steelhead appliance as an optimization peer. You must specify at least one remote target Steelhead appliance (and, optionally, which ports and backup Steelhead appliances), and add rules to specify the network of servers, ports, port labels, and out-of-path Steelhead appliances to use. </li>
            <li class="CellBullet"><span class="Bold"><a name="374589">Fixed-Target</a></span><span class="Bold" style="font-weight: normal"> </span><span class="Bold">(Packet Mode Optimization)</span><span class="Bold" style="font-weight: normal"> - </span>Skips the auto-discovery process and uses a specified remote Steelhead appliance as an optimization peer to perform <span class="Bold" style="font-weight: normal">bandwidth optimization on TCP-over-IPv6 or UDP-over-</span><span class="Bold" style="font-weight: normal">IPv4 connections.</span></li>
            <div class="CellIndent1"><span class="Bold" style="font-weight: normal"><a name="374594">Packet-mode optimization rules support both physical in-path and master/</a></span><span class="Bold" style="font-weight: normal">backup Steelhead configurations.</span></div>
            <div class="CellIndent1"><a name="374595">You must specify</a><span class="Bold" style="font-weight: normal"> which TCP-over-IPv6 or UDP-over-IPv4 traffic flows need </span><span class="Bold" style="font-weight: normal">optimization,</span> at least one remote target Steelhead appliance, and, optionally, which ports and backup Steelhead appliances to use. </div>
            <div class="CellIndent1"><a name="374602">In addition to adding fixed-target packet-mode optimization rules, you </a>must go to Configure &gt; Optimization &gt; General Service Settings, enable packet-mode optimization, and restart the optimization service.</div>
            <div class="CellIndent1"><span class="Bold" style="font-weight: normal"><a name="374603">Packet-mode optimization rules are unidirectional; a rule on the client-side </a></span><span class="Bold" style="font-weight: normal">Steelhead optimizes traffic to the server only. To optimize bidirectional </span><span class="Bold" style="font-weight: normal">traffic, define two rules: </span></div>
            <div class="CellBulletSubBullet_outer" style="margin-left: 10.8pt">
              <table border="0" cellspacing="0" cellpadding="0" summary="">
                <tr style="vertical-align: baseline;">
                  <td>
                    <div class="CellBulletSubBullet_inner" style="width: 7.199999999999999pt; white-space: nowrap;">&#8226;	</div>
                  </td>
                  <td width="100%">
                    <div class="CellBulletSubBullet_inner"><span class="Bold" style="font-weight: normal"><a name="374604">A fixed-target packet-mode optimization rule on the client-side Steelhead </a></span><span class="Bold" style="font-weight: normal">to the server. </span></div>
                  </td>
                </tr>
              </table>
            </div>
            <div class="CellBulletSubBullet_outer" style="margin-left: 10.8pt">
              <table border="0" cellspacing="0" cellpadding="0" summary="">
                <tr style="vertical-align: baseline;">
                  <td>
                    <div class="CellBulletSubBullet_inner" style="width: 7.199999999999999pt; white-space: nowrap;">&#8226;	</div>
                  </td>
                  <td width="100%">
                    <div class="CellBulletSubBullet_inner"><span class="Bold" style="font-weight: normal"><a name="374605">A fixed-target packet-mode optimization rule on the server-side Steelhead </a></span><span class="Bold" style="font-weight: normal">to the client.</span></div>
                  </td>
                </tr>
              </table>
            </div>
            <div class="CellIndent1"><a name="374606">Packet-mode optimization rules perform packet-by-packet optimization, as </a>opposed to traffic-flow optimization. After you create the in-path rule to intercept the connection, the traffic flows enter the Steelhead. The Steelhead does not terminate the connection, but instead rearranges the packet headers and payload for SDR optimization. Next, it provides SDR optimization and sends the packets through an IPv4 channel to the peer Steelhead over a TCP connection. The peer Steelhead decodes the packet and routes it to the destined server. The optimized packets are sent through a dedicated channel to the peer, depending on which in-path rule the packet's flow was matched against.</div>
            <div class="CellIndent1"><a name="374610">Because the Steelhead appliance does not terminate packet-mode optimized </a>traffic, these connections do not appear in the Current Connections report. To view packet-mode optimized traffic, enter the<span style="font-size: 10.0pt; font-weight: bold"> show packet-mode ip-</span><span style="font-size: 10.0pt; font-weight: bold">channels </span>CLI command at the system prompt.</div>
            <div class="CellIndent1" style="color: #000000; font-style: normal; font-variant: normal; font-weight: bold; text-transform: none; vertical-align: baseline"><span class="Bold"><a name="374611">Requirements:</a></span></div>
            <div class="CellBulletSubBullet_outer" style="margin-left: 10.8pt">
              <table border="0" cellspacing="0" cellpadding="0" summary="">
                <tr style="vertical-align: baseline;">
                  <td>
                    <div class="CellBulletSubBullet_inner" style="width: 7.199999999999999pt; white-space: nowrap;">&#8226;	</div>
                  </td>
                  <td width="100%">
                    <div class="CellBulletSubBullet_inner"><span class="Bold" style="font-weight: normal"><a name="374612">Both the client-side Steelhead and the server-side Steelhead must be </a></span><span class="Bold" style="font-weight: normal">running RiOS v7.0.</span></div>
                  </td>
                </tr>
              </table>
            </div>
            <div class="CellBulletSubBullet_outer" style="margin-left: 10.8pt">
              <table border="0" cellspacing="0" cellpadding="0" summary="">
                <tr style="vertical-align: baseline;">
                  <td>
                    <div class="CellBulletSubBullet_inner" style="width: 7.199999999999999pt; white-space: nowrap;">&#8226;	</div>
                  </td>
                  <td width="100%">
                    <div class="CellBulletSubBullet_inner"><a name="374613">For TCP-over-IPv6 traffic, you must enable IPv6 on base interfaces (IPv6 is </a>not enabled by default.)</div>
                  </td>
                </tr>
              </table>
            </div>
            <div class="CellBulletSubBullet_outer" style="margin-left: 10.8pt">
              <table border="0" cellspacing="0" cellpadding="0" summary="">
                <tr style="vertical-align: baseline;">
                  <td>
                    <div class="CellBulletSubBullet_inner" style="width: 7.199999999999999pt; white-space: nowrap;">&#8226;	</div>
                  </td>
                  <td width="100%">
                    <div class="CellBulletSubBullet_inner"><span class="Bold" style="font-weight: normal"><a name="374614">Your network configuration must support IPv4 for use with the inner </a></span><span class="Bold" style="font-weight: normal">channels between </span>Steelhead appliance<span class="Bold" style="font-weight: normal">s.</span></div>
                  </td>
                </tr>
              </table>
            </div>
          </td>
        </tr>
        <tr>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 1px; border-right-color: none; border-right-style: none; border-right-width: 0.0pt; border-top-color: #000000; border-top-style: solid; border-top-width: 1px; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top">
            <div class="CellBody"><a name="374619">&nbsp;</a></div>
          </td>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 1px; border-left-color: none; border-left-style: none; border-left-width: 0.0pt; border-top-color: #000000; border-top-style: solid; border-top-width: 1px; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top">
            <div class="CellIndent1" style="color: #000000; font-style: normal; font-variant: normal; font-weight: bold; text-transform: none; vertical-align: baseline"><span class="Bold"><a name="374621">Packet-mode optimization rules do not support:</a></span></div>
            <div class="CellBulletSubBullet_outer" style="margin-left: 10.8pt">
              <table border="0" cellspacing="0" cellpadding="0" summary="">
                <tr style="vertical-align: baseline;">
                  <td>
                    <div class="CellBulletSubBullet_inner" style="width: 7.199999999999999pt; white-space: nowrap;">&#8226;	</div>
                  </td>
                  <td width="100%">
                    <div class="CellBulletSubBullet_inner"><span class="Bold" style="font-weight: normal"><a name="374622">Automatic reflection of DSCP markings.</a></span></div>
                  </td>
                </tr>
              </table>
            </div>
            <div class="CellBulletSubBullet_outer" style="margin-left: 10.8pt">
              <table border="0" cellspacing="0" cellpadding="0" summary="">
                <tr style="vertical-align: baseline;">
                  <td>
                    <div class="CellBulletSubBullet_inner" style="width: 7.199999999999999pt; white-space: nowrap;">&#8226;	</div>
                  </td>
                  <td width="100%">
                    <div class="CellBulletSubBullet_inner"><span class="Bold" style="font-weight: normal"><a name="374623">Latency optimization and preoptimization policies. Selecting this rule type </a></span><span class="Bold" style="font-weight: normal">automatically sets the preoptimization policy and latency optimization </span><span class="Bold" style="font-weight: normal">policies to none.</span></div>
                  </td>
                </tr>
              </table>
            </div>
            <div class="CellBulletSubBullet_outer" style="margin-left: 10.8pt">
              <table border="0" cellspacing="0" cellpadding="0" summary="">
                <tr style="vertical-align: baseline;">
                  <td>
                    <div class="CellBulletSubBullet_inner" style="width: 7.199999999999999pt; white-space: nowrap;">&#8226;	</div>
                  </td>
                  <td width="100%">
                    <div class="CellBulletSubBullet_inner"><span class="Bold" style="font-weight: normal"><a name="374624">Auto-discovery of the peer Steelhead. Because this is a fixed-target rule, </a></span><span class="Bold" style="font-weight: normal">the </span>Steelhead<span class="Bold" style="font-weight: normal"> determines the IP address of its peer from the rule </span><span class="Bold" style="font-weight: normal">configuration. </span></div>
                  </td>
                </tr>
              </table>
            </div>
            <div class="CellBulletSubBullet_outer" style="margin-left: 10.8pt">
              <table border="0" cellspacing="0" cellpadding="0" summary="">
                <tr style="vertical-align: baseline;">
                  <td>
                    <div class="CellBulletSubBullet_inner" style="width: 7.199999999999999pt; white-space: nowrap;">&#8226;	</div>
                  </td>
                  <td width="100%">
                    <div class="CellBulletSubBullet_inner"><span class="Bold" style="font-weight: normal"><a name="374628">Connection forwarding, simplified routing, or asymmetric routing.</a></span></div>
                  </td>
                </tr>
              </table>
            </div>
            <div class="CellBulletSubBullet_outer" style="margin-left: 10.8pt">
              <table border="0" cellspacing="0" cellpadding="0" summary="">
                <tr style="vertical-align: baseline;">
                  <td>
                    <div class="CellBulletSubBullet_inner" style="width: 7.199999999999999pt; white-space: nowrap;">&#8226;	</div>
                  </td>
                  <td width="100%">
                    <div class="CellBulletSubBullet_inner"><span class="Bold" style="font-weight: normal"><a name="374635">QoS, MIP interfaces, </a></span>RSP<span class="Bold" style="font-weight: normal">, NetFlow, transparency, or the automatic kickoff </span><span class="Bold" style="font-weight: normal">feature.</span></div>
                  </td>
                </tr>
              </table>
            </div>
            <div class="CellBulletSubBullet_outer" style="margin-left: 10.8pt">
              <table border="0" cellspacing="0" cellpadding="0" summary="">
                <tr style="vertical-align: baseline;">
                  <td>
                    <div class="CellBulletSubBullet_inner" style="width: 7.199999999999999pt; white-space: nowrap;">&#8226;	</div>
                  </td>
                  <td width="100%">
                    <div class="CellBulletSubBullet_inner"><span class="Bold" style="font-weight: normal"><a name="374638">Automatically assigned IPv6 addresses.</a></span></div>
                  </td>
                </tr>
              </table>
            </div>
          </td>
        </tr>
        <tr>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 1px; border-right-color: none; border-right-style: none; border-right-width: 0.0pt; border-top-color: #000000; border-top-style: solid; border-top-width: 1px; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top">
            <div class="CellBody"><a name="374640">&nbsp;</a></div>
          </td>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 1px; border-left-color: none; border-left-style: none; border-left-width: 0.0pt; border-top-color: #000000; border-top-style: solid; border-top-width: 1px; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top">
            <li class="CellBullet"><span class="Bold"><a name="374645">Pass-Through</a></span><span class="Bold" style="font-weight: normal"> - </span>Allows the SYN packet to pass through the Steelhead appliance unoptimized. No optimization is performed on the TCP connection initiated by this SYN packet. You define pass-through rules to exclude subnets from optimization. Traffic is also passed through when the Steelhead appliance is in bypass mode. (Pass through of traffic might occur because of in-path rules or because the connection was established before the Steelhead appliance was put in place or before the Steelhead service was enabled.)</li>
            <li class="CellBullet"><span class="Bold"><a name="374659">Discard</a></span><span class="Bold" style="font-weight: normal"> - </span>Drops the SYN packets silently. The Steelhead appliance filters out traffic that matches the discard rules. This process is similar to how routers and firewalls drop disallowed packets: the connection-initiating device has no knowledge of the fact that its packets were dropped until the connection times out.</li>
            <li class="CellBullet"><span class="Bold"><a name="374660">Deny</a></span><span class="Bold" style="font-weight: normal"> - </span>Drops the SYN packets, sends a message back to its source, and resets the TCP connection being attempted. Using an active reset process rather than a silent discard allows the connection initiator to know that its connection is disallowed.</li>
          </td>
        </tr>
        <tr>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 1px; border-right-color: none; border-right-style: none; border-right-width: 0.0pt; border-top-color: #000000; border-top-style: solid; border-top-width: 1px; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top">
            <div class="CellBody"><a name="374662">Source Subnet</a></div>
          </td>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 1px; border-left-color: none; border-left-style: none; border-left-width: 0.0pt; border-top-color: #000000; border-top-style: solid; border-top-width: 1px; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top">
            <div class="CellBody"><a name="374664">Specify the subnet IP address and netmask for the source network:</a></div>
            <li class="CellBullet"><span style="font-weight: bold"><a name="374665">All IPv4</a></span> - Maps to 0.0.0.0./0.  </li>
            <li class="CellBullet"><span style="font-weight: bold"><a name="374666">All IPv6 </a></span>-  Maps to ::/0.</li>
            <li class="CellBullet"><span style="font-weight: bold"><a name="374667">All IP</a></span> -  Maps to all IPv4 and IPv6 networks.</li>
            <div class="CellImportant">
              <span class="Bold">Important: </span><a name="374668">In a virtual in-path configuration using packet-mode optimization, </a>do not use the wildcard All IP option for both the source and destination IP addresses on the server-side and client-side Steelhead appliances. Doing so can create a loop between the Steelheads if the server-side Steelhead forms an inner connection with the client-side Steelhead before the client-side Steelhead forms an inner connection with the server-side Steelhead. Instead, configure the rule using the local subnet on the LAN side of the Steelhead appliance.</div>
            <div class="CellBody"><a name="374690">Use the following format for an individual subnet IP address and netmask:</a></div>
            <div class="CellBody"><span class="Bold" style="font-weight: normal"><a name="374691">XXX.XXX.XXX.XXX/XX (IPv4)</a></span></div>
            <div class="CellBody"><a name="374692">X:X:X::X/XXX (IPv6)</a></div>
            <div class="CellBody"><a name="374693">You can also specify </a><span class="Bold" style="font-weight: normal">0.0.0.0/0</span> as the wildcard for all traffic.</div>
            <div class="CellBody"><span class="Bold" style="font-weight: normal"><a name="374694">When creating a fixed-target packet-mode rule, you must configure an IPv6 </a></span><span class="Bold" style="font-weight: normal">address and route for each interface, unless you are optimizing UDP traffic. </span></div>
            <div class="CellBody"><span class="Bold"><a name="374695">Port or Port Label</a></span><span class="Bold" style="font-weight: normal"> - </span>Specify the destination port number, port label, or All. Click Port Label to go to the Configure &gt; Networking &gt; Port Labels page for reference.</div>
          </td>
        </tr>
        <tr>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 1px; border-right-color: none; border-right-style: none; border-right-width: 0.0pt; border-top-color: #000000; border-top-style: solid; border-top-width: 1px; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top" rowspan="2">
            <div class="CellBody"><a name="374697">Destination Subnet</a></div>
          </td>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 1px; border-left-color: none; border-left-style: none; border-left-width: 0.0pt; border-top-color: #000000; border-top-style: solid; border-top-width: 1px; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top">
            <div class="CellBody"><a name="374699">Specify the subnet IP address and netmask for the destination network:</a></div>
            <li class="CellBullet"><span style="font-weight: bold"><a name="374700">All IPv4</a></span> - Maps to 0.0.0.0./0.  </li>
            <li class="CellBullet"><span style="font-weight: bold"><a name="374701">All IPv6 </a></span>-  Maps to ::/0.</li>
            <li class="CellBullet"><span style="font-weight: bold"><a name="374702">All IP</a></span> -  Maps to all IPv4 and IPv6 networks.</li>
            <div class="CellImportant">
              <span class="Bold">Important: </span><a name="374703">In a virtual in-path configuration using packet-mode optimization, </a>do not use the wildcard All IP option for both the source and destination IP addresses on the server-side and client-side Steelhead appliances. Doing so can create a loop between the Steelheads if the server-side Steelhead forms an inner connection with the client-side Steelhead before the client-side Steelhead forms an inner connection with the server-side Steelhead. Instead, configure the rule using the local subnet on the LAN side of the Steelhead appliance.</div>
            <div class="CellBody"><a name="374725">Use the following format for an individual subnet IP address and netmask: </a><span class="Bold" style="font-weight: normal">XXX.XXX.XXX.XXX/XX.</span></div>
            <div class="CellBody"><a name="374726">You can also specify </a><span class="Bold" style="font-weight: normal">all</span> or <span class="Bold" style="font-weight: normal">0.0.0.0/0</span> as the wildcard for all traffic.</div>
            <div class="CellBody"><span class="Bold" style="font-weight: normal"><a name="374727">When creating a fixed-target packet mode optimization rule, you must </a></span><span class="Bold" style="font-weight: normal">configure an IPv6 address and route for each interface. </span></div>
          </td>
        </tr>
        <tr>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 1px; border-left-color: none; border-left-style: none; border-left-width: 0.0pt; border-top-color: #000000; border-top-style: solid; border-top-width: 1px; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top">
            <div class="CellBody"><span class="Bold"><a name="374731">Port or Port Label</a></span><span class="Bold" style="font-weight: normal"> - </span>Specify the destination port number, port label, or All. Click Port Label to go to the Configure &gt; Networking &gt; Port Labels page for reference.</div>
          </td>
        </tr>
        <tr>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 1px; border-right-color: none; border-right-style: none; border-right-width: 0.0pt; border-top-color: #000000; border-top-style: solid; border-top-width: 1px; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top" rowspan="2">
            <div class="CellBody"><a name="374733">Target Appliance IP Address</a></div>
          </td>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 1px; border-left-color: none; border-left-style: none; border-left-width: 0.0pt; border-top-color: #000000; border-top-style: solid; border-top-width: 1px; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top">
            <div class="CellBody"><a name="374735">Specify the target appliance address for a fixed-target rule. When the protocol </a>is TCP and you do not specify an IP address, the rule defaults to all IPv6 addresses.</div>
          </td>
        </tr>
        <tr>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 1px; border-left-color: none; border-left-style: none; border-left-width: 0.0pt; border-top-color: #000000; border-top-style: solid; border-top-width: 1px; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top">
            <div class="CellBody"><span class="Bold"><a name="374739">Port</a></span><span class="Bold" style="font-weight: normal"> - </span>Specify the target port number for a fixed-target rule.</div>
          </td>
        </tr>
        <tr>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 1px; border-right-color: none; border-right-style: none; border-right-width: 0.0pt; border-top-color: #000000; border-top-style: solid; border-top-width: 1px; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top" rowspan="2">
            <div class="CellBody"><a name="374741">Backup Appliance IP Address</a></div>
          </td>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 1px; border-left-color: none; border-left-style: none; border-left-width: 0.0pt; border-top-color: #000000; border-top-style: solid; border-top-width: 1px; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top">
            <div class="CellBody"><a name="374743">Specify the backup appliance address for a fixed-target rule.</a></div>
          </td>
        </tr>
        <tr>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 1px; border-left-color: none; border-left-style: none; border-left-width: 0.0pt; border-top-color: #000000; border-top-style: solid; border-top-width: 1px; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top">
            <div class="CellBody"><span class="Bold"><a name="374747">Port</a></span><span class="Bold" style="font-weight: normal"> - </span>Specify the backup destination port number for a fixed-target rule.</div>
          </td>
        </tr>
        <tr>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 1px; border-right-color: none; border-right-style: none; border-right-width: 0.0pt; border-top-color: #000000; border-top-style: solid; border-top-width: 1px; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top">
            <div class="CellBody"><a name="374749">VLAN Tag ID</a></div>
          </td>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 1px; border-left-color: none; border-left-style: none; border-left-width: 0.0pt; border-top-color: #000000; border-top-style: solid; border-top-width: 1px; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top">
            <div class="CellBody"><a name="374752">Specify a VLAN identification number from 0 to 4094, enter all to apply the </a>rule to all VLANs, or enter untagged to apply the rule to nontagged connections.</div>
            <div class="CellBody"><a name="374756">RiOS supports VLAN v802.1Q. To configure VLAN tagging, configure in-path </a>rules to apply to all VLANs or to a specific VLAN. By default, rules apply to all VLAN values unless you specify a particular VLAN ID. Pass-through traffic maintains any preexisting VLAN tagging between the LAN and WAN interfaces.</div>
          </td>
        </tr>
        <tr>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 1px; border-right-color: none; border-right-style: none; border-right-width: 0.0pt; border-top-color: #000000; border-top-style: solid; border-top-width: 1px; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top">
            <div class="CellBody"><a name="374758">Protocol</a></div>
          </td>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 1px; border-left-color: none; border-left-style: none; border-left-width: 0.0pt; border-top-color: #000000; border-top-style: solid; border-top-width: 1px; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top">
            <div class="CellBody"><a name="374760">(Appears only for fixed-target </a><span class="Bold" style="font-weight: normal">packet-mode optimization rules</span>.) Select a traffic protocol from the drop-down list:</div>
            <li class="CellBullet"><span style="font-weight: bold"><a name="374761">TCP</a></span><span class="Bold" style="font-weight: normal"> - Specifies the TCP protocol</span>. Supports TCP-over-IPv6 only.</li>
            <li class="CellBullet"><span style="font-weight: bold"><a name="374762">UDP</a></span><span class="Bold" style="font-weight: normal"> - Specifies the UDP protocol</span>. Supports UDP-over-IPv4 only.</li>
            <li class="CellBullet"><span style="font-weight: bold"><a name="374763">Any</a></span><span class="Bold" style="font-weight: normal"> - </span>Specifies all TCP- and UDP-based protocols. This is the default setting.</li>
          </td>
        </tr>
        <tr>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 1px; border-right-color: none; border-right-style: none; border-right-width: 0.0pt; border-top-color: #000000; border-top-style: solid; border-top-width: 1px; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top">
            <div class="CellBody"><a name="374765">Preoptimization Policy</a></div>
          </td>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 1px; border-left-color: none; border-left-style: none; border-left-width: 0.0pt; border-top-color: #000000; border-top-style: solid; border-top-width: 1px; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top">
            <div class="CellBody"><a name="374767">Select a traffic type from the drop-down list:</a></div>
            <li class="CellBullet"><span style="font-weight: bold"><a name="374768">None</a></span><span class="Bold" style="font-weight: normal"> - </span>If the Oracle Forms, SSL, or Oracle Forms-over-SSL preoptimization policy is turned on and you want to turn it off for a port, select <span class="Bold" style="font-weight: normal">None</span>. This is the default setting.</li>
            <div class="CellIndent1"><a name="374772">In RiOS v6.0 and later, traffic to port 443 always uses a preoptimization </a>policy of SSL even if an in-path rule on the client-side Steelhead appliance sets the preoptimization policy to None. To disable the SSL preoptimization for traffic to port 443, you can either:</div>
            <div class="CellIndent1"><a name="374778">1. Disable the SSL optimization on the client or server-side Steelhead </a>appliance.</div>
            <div class="CellIndent1"><a name="374780">&#8212;or&#8212;</a></div>
            <div class="CellIndent1"><a name="374784">2. Modify the peering rule on the server-side Steelhead appliance by setting </a>the SSL Capability control to No Check.</div>
            <li class="CellBullet"><span style="font-weight: bold"><a name="374786">Oracle Forms</a></span><span class="Bold" style="font-weight: normal"> - </span>Enables preoptimization processing for Oracle Forms.</li>
            <li class="CellBullet"><span style="font-weight: bold"><a name="374787">Oracle Forms over SSL</a></span><span class="Bold" style="font-weight: normal"> - </span>Enables preoptimization processing for both the Oracle Forms and SSL encrypted traffic through SSL secure ports on the client-side Steelhead appliance. You must also set the Latency Optimization Policy to HTTP.</li>
            <div class="CellIndent1"><span style="font-weight: bold"><a name="374791">Note</a></span>: If the server is running over a standard secure port&#8212;for example, port 443&#8212;the Oracle Forms over SSL in-path rule needs to be <span style="font-style: italic">before</span> the default secure port pass-through rule in the in-path rule list.</div>
            <li class="CellBullet"><span class="Bold"><a name="374793">SSL</a></span><span class="Bold" style="font-weight: normal"> - </span>Enables preoptimization processing for SSL encrypted traffic through SSL secure ports on the client-side Steelhead appliance. </li>
          </td>
        </tr>
        <tr>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 1px; border-right-color: none; border-right-style: none; border-right-width: 0.0pt; border-top-color: #000000; border-top-style: solid; border-top-width: 1px; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top">
            <div class="CellBody"><a name="374798">Latency Optimization Policy</a></div>
          </td>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 1px; border-left-color: none; border-left-style: none; border-left-width: 0.0pt; border-top-color: #000000; border-top-style: solid; border-top-width: 1px; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top">
            <div class="CellBody"><a name="374800">Select one of the following policies from the drop-down list:</a></div>
            <li class="CellBullet"><span class="Bold"><a name="374801">Normal</a></span><span class="Bold" style="font-weight: normal"> - </span>Perform all latency optimizations (HTTP is activated for ports <span class="Bold" style="font-weight: normal">80</span> and <span class="Bold" style="font-weight: normal">8080</span>). This is the default setting.</li>
            <li class="CellBullet"><span class="Bold"><a name="374802">HTTP</a></span><span class="Bold" style="font-weight: normal"> - </span>Activate HTTP optimization on connections matching this rule.</li>
            <li class="CellBullet"><span class="Bold"><a name="374803">Outlook Anywhere</a></span><span class="Bold" style="font-weight: normal"> - </span>Activate RPC over HTTP(S) optimization for Outlook Anywhere on connections matching this rule. To auto-detect Outlook Anywhere or HTTP on a connection, select the Normal latency optimization policy and enable the Auto-Detect Outlook Anywhere Connections option in the Configure &gt; Optimization &gt; MAPI page. The auto-detect option in the MAPI page is best for simple Steelhead configurations with only a single Steelhead at each site and when the IIS server is also handling Web sites. If the IIS server is only used as RPC Proxy, and for configurations with asymmetric routing, connection forwarding or Interceptor installations, add in-path rules that identify the RPC Proxy server IP addresses and select this latency optimization policy. After adding the in-path rule, disable the auto-detect option in the Configure &gt; Optimization &gt; MAPI page.</li>
            <li class="CellBullet"><span style="font-weight: bold"><a name="374806">Citrix</a></span> - Activate Citrix-over-SSL optimization on connections matching this rule. Add an in-path rule to the client-side Steelhead appliance that specifies the Citrix Access Gateway IP address, select this latency optimization policy on both the client and server-side Steelhead appliances, and set the preoptimization policy to SSL. Both the client-side and the server-side Steelhead appliances must be running RiOS v7.0. The preoptimization policy must be set to SSL.</li>
            <div class="CellIndent1"><a name="374821">SSL must be enabled on the Citrix Access Gateway. On the server-side </a>Steelhead appliance, enable SSL and install the SSL server certificate for the Citrix Access Gateway. </div>
            <div class="CellIndent1"><a name="374828">The client-side and server-side Steelhead appliances establish an SSL </a>channel between themselves to secure the optimized ICA traffic. End users log in to the Access Gateway through a browser (HTTPS) and access applications through the Web Interface site. Clicking an application icon starts the Online Plug-in, which establishes an SSL connection to the Access Gateway. The ICA connection is tunneled through the SSL connection.</div>
            <div class="CellIndent1"><a name="374832">The Steelhead appliance decrypts the SSL connection from the user device, </a>applies ICA latency optimization, and re-encrypts the traffic over the Internet. The server-side Steelhead appliance decrypts the optimized ICA traffic and re-encrypts the ICA traffic into the original SSL connection destined to the Access Gateway. </div>
            <li class="CellBullet"><span class="Bold"><a name="374836">None</a></span><span class="Bold" style="font-weight: normal"> - </span>Do not activate latency optimization on connections matching this rule. For Oracle Forms-over-SSL encrypted traffic, you must set the Latency Optimization Policy to HTTP.</li>
            <div class="CellTip">
              <span class="Bold">Tip: </span><a name="374837">Setting the Latency Optimization Policy to None excludes </a><span style="font-style: italic">all</span> latency optimizations, such as HTTP, MAPI, and SMB.</div>
          </td>
        </tr>
        <tr>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 1px; border-right-color: none; border-right-style: none; border-right-width: 0.0pt; border-top-color: #000000; border-top-style: solid; border-top-width: 1px; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top">
            <div class="CellBody"><a name="374839">Data Reduction Policy</a></div>
          </td>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 1px; border-left-color: none; border-left-style: none; border-left-width: 0.0pt; border-top-color: #000000; border-top-style: solid; border-top-width: 1px; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top">
            <div class="CellBody"><a name="374841">Optionally, if you have selected Auto-Discover or </a><span class="Bold" style="font-weight: normal">Fixed Target</span>, you can configure the following types of data reduction policies:</div>
            <li class="CellBullet"><span style="font-weight: bold"><a name="374842">Normal</a></span><span class="Bold" style="font-weight: normal"> - </span>Perform LZ compression and SDR.</li>
            <li class="CellBullet"><span style="font-weight: bold"><a name="374843">SDR-Only</a></span><span class="Bold" style="font-weight: normal"> - </span>Perform SDR; do not perform LZ compression.</li>
            <li class="CellBullet"><span style="font-weight: bold"><a name="374845">SDR-M</a></span><span class="Bold" style="font-weight: normal"> - </span>Performs data reduction entirely in memory, which prevents the Steelhead appliance from reading and writing to and from the disk. Enabling this option can yield high LAN-side throughput because it eliminates all disk latency. This data reduction policy is useful for</li>
            <div class="CellBulletSubDash_outer" style="margin-left: 12.8pt">
              <table border="0" cellspacing="0" cellpadding="0" summary="">
                <tr style="vertical-align: baseline;">
                  <td>
                    <div class="CellBulletSubDash_inner" style="width: 7.199999999999999pt; white-space: nowrap;">-   </div>
                  </td>
                  <td width="100%">
                    <div class="CellBulletSubDash_inner"><a name="374849">a very small amount of data; for example, interactive traffic.</a></div>
                  </td>
                </tr>
              </table>
            </div>
            <div class="CellBulletSubDash_outer" style="margin-left: 12.8pt">
              <table border="0" cellspacing="0" cellpadding="0" summary="">
                <tr style="vertical-align: baseline;">
                  <td>
                    <div class="CellBulletSubDash_inner" style="width: 7.199999999999999pt; white-space: nowrap;">-   </div>
                  </td>
                  <td width="100%">
                    <div class="CellBulletSubDash_inner"><a name="374850">point-to-point replication during off-peak hours when both the server-side </a>and client-side Steelheads are the same (or similar) size. </div>
                  </td>
                </tr>
              </table>
            </div>
            <div class="CellIndent1"><a name="374860">Both Steelhead appliances must be running RiOS v6.0.x or later.   </a></div>
            <li class="CellBullet"><span class="Bold"><a name="374861">Compression-Only</a></span><span class="Bold" style="font-weight: normal"> - </span>Perform LZ compression; do not perform SDR.</li>
            <li class="CellBullet"><span style="font-weight: bold"><a name="374862">None</a></span><span class="Bold" style="font-weight: normal"> - </span>Do not perform SDR or LZ compression.</li>
            <div class="CellBody"><a name="374864">To configure data reduction policies for the FTP data channel, define an in-path </a>rule with the destination port <span class="Bold" style="font-weight: normal">20</span> and set its data reduction policy. Setting QoS for port <span class="Bold" style="font-weight: normal">20</span> on the client-side Steelhead appliance affects passive FTP, while setting the QoS for port <span class="Bold" style="font-weight: normal">20</span> on the server-side Steelhead appliance affects active FTP.</div>
            <div class="CellBody"><a name="374871">To configure optimization policies for the MAPI data channel, define an in-</a>path rule with the destination port <span class="Bold" style="font-weight: normal">7830</span> and set its data reduction policy.</div>
          </td>
        </tr>
        <tr>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 1px; border-right-color: none; border-right-style: none; border-right-width: 0.0pt; border-top-color: #000000; border-top-style: solid; border-top-width: 1px; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top">
            <div class="CellBody"><a name="374873">Auto Kickoff</a></div>
          </td>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 1px; border-left-color: none; border-left-style: none; border-left-width: 0.0pt; border-top-color: #000000; border-top-style: solid; border-top-width: 1px; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top">
            <div class="CellBody"><a name="374879">Enables kickoff, which resets pre-existing connections to force them to go </a>through the connection creation process again. If you enable kickoff, connections that pre-exist when the optimization service is started are reestablished and optimized. </div>
            <div class="CellBody"><a name="374880">Generally, connections are short-lived and kickoff is not necessary. It is suitable </a>for certain long-lived connections, such as data replication, and very challenging remote environments: for example, in a remote branch-office with a T1 and a 35 ms round-trip time, you would want connections to migrate to optimization gracefully, rather than risk interruption with kickoff.</div>
            <div class="CellBody"><a name="374884">RiOS v6.1 and later provides three ways to enable kickoff: </a></div>
            <li class="CellBullet"><a name="374885">Globally for all existing connections in the Configure &gt; Optimization &gt; </a>General Service Settings page.</li>
            <li class="CellBullet"><a name="374886">For a single pass-through or optimized connection in the Current </a>Connections report, one connection at a time.</li>
            <li class="CellBullet"><a name="374887">For all existing connections that match an in-path rule and the rule has </a>kickoff enabled.</li>
            <div class="CellBody"><a name="374888">In most deployments, you do not want to set automatic kickoff globally </a>because it disrupts <span style="font-style: italic">all</span> existing connections. When you enable kick off using an in-path rule, once the Steelhead detects packet flow that matches the IP and port specified in the rule, it sends an RST packet to the client and server maintaining the connection to try to close it. Next, it sets an internal flag to prevent any further kickoffs until the optimization service is once again restarted. </div>
            <div class="CellNote">
              <span class="Bold">Note: </span><a name="374892">If no data is being transferred between the client and server, the </a>connection is not reset immediately. It resets the next time the client or server tries to send a message. Therefore, when the application is idle, it might take a while for the connection to reset.</div>
            <div class="CellBody"><a name="374893">By default, </a>automatic kickoff per in-path rule is disabled.</div>
            <div class="CellBody"><a name="374894">The service applies the first matching in-path rule for an existing connection </a>that matches the source and destination IP and port; it does not consider a VLAN tag ID when determining whether to kick off the connection. Consequently, the service automatically kicks off connections with matching source and destination addresses and ports on different VLANs. </div>
            <div class="CellBody"><a name="374895">The source and destination of a pre-existing connection cannot be determined </a>because the Steelhead appliance did not see the initial TCP handshake whereas an in-path rule specifies the source and destination IP address to which the rule should be applied. Hence this connection for this IP address pair is matched twice, once as source to destination and the other as destination to source to find an in-path rule.</div>
            <div class="CellBody"><a name="374899">As an example, the following in-path rule will kick off connections from </a>10.11.10.10/24 to 10.12.10.10/24 and 10.12.10.10/24 to 10.11.10.10/24.</div>
            <div class="CellBody"><a name="374900">Src 10.11.10.10/24 Dst 10.12.10.10/24 Auto Kickoff enabled</a></div>
            <div class="CellBody"><a name="374901">The first matching in-path rule will be considered during the kickoff check for </a>a pre-existing connection. If the first matching in-path rule has kickoff enabled, then that pre-existing connection will be reset.</div>
            <div class="CellImportant">
              <span class="Bold">Important: </span><a name="374902">Specifying automatic kickoff per in-path rule enables kickoff even </a>when you disable the global kickoff feature. When global kickoff is enabled, it overrides this setting. You set the global kickoff feature using the Reset Existing Client Connections on Start Up feature, which appears in the Configure &gt; Optimization &gt; General Service Settings page.</div>
            <div class="CellNote">
              <span class="Bold">Note: </span><a name="374903">This feature pertains only to auto-discover and fixed-target rule types and </a>is dimmed and unavailable for the other rule types.</div>
          </td>
        </tr>
        <tr>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 1px; border-right-color: none; border-right-style: none; border-right-width: 0.0pt; border-top-color: #000000; border-top-style: solid; border-top-width: 1px; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top">
            <div class="CellBody"><a name="374905">Neural Framing Mode</a></div>
          </td>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 1px; border-left-color: none; border-left-style: none; border-left-width: 0.0pt; border-top-color: #000000; border-top-style: solid; border-top-width: 1px; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top">
            <div class="CellBody"><a name="374907">Optionally, if you have selected Auto-Discover or Fixed Target, you can select a </a>neural framing mode for the in-path rule. Neural framing enables the system to select the optimal packet framing boundaries for SDR. Neural framing creates a set of heuristics to intelligently determine the optimal moment to flush TCP buffers. The system continuously evaluates these heuristics and uses the optimal heuristic to maximize the amount of buffered data transmitted in each flush, while minimizing the amount of idle time that the data sits in the buffer.</div>
            <div class="CellBody"><a name="374908">You can specify the following neural framing settings:</a></div>
            <li class="CellBullet"><span style="font-weight: bold"><a name="374909">Never</a></span><span class="Bold" style="font-weight: normal"> - </span>Do not use the Nagle algorithm. The Nagle algorithm is a means of improving the efficiency of TCP/IP networks by reducing the number of packets that need to be sent over the network. It works by combining a number of small outgoing messages and sending them all at once. All the data is immediately encoded without waiting for timers to fire or application buffers to fill past a specified threshold. Neural heuristics are computed in this mode but are not used. In general, this setting works well with time-sensitive and chatty or real-time traffic.</li>
            <li class="CellBullet"><span style="font-weight: bold"><a name="374910">Always</a></span><span class="Bold" style="font-weight: normal"> - </span>Use the Nagle algorithm. This is the default setting. All data is passed to the codec which attempts to coalesce consume calls (if needed) to achieve better fingerprinting. A timer (6 ms) backs up the codec and causes leftover data to be consumed. Neural heuristics are computed in this mode but are not used. </li>
            <li class="CellBullet"><span style="font-weight: bold"><a name="374911">TCP Hints</a></span><span class="Bold" style="font-weight: normal"> - </span>If data is received from a partial frame packet or a packet with the TCP PUSH flag set, the encoder encodes the data instead of immediately coalescing it. Neural heuristics are computed in this mode but are not used. </li>
            <li class="CellBullet"><span style="font-weight: bold"><a name="374912">Dynamic</a></span><span class="Bold" style="font-weight: normal"> - </span>Dynamically adjust the Nagle parameters. In this option, the system discerns the optimum algorithm for a particular type of traffic and switches to the best algorithm based on traffic characteristic changes. </li>
            <div class="CellBody"><a name="374913">For different types of traffic, one algorithm might be better than others. The </a>considerations include: latency added to the connection, compression, and SDR performance. </div>
            <div class="CellBody"><a name="374914">To configure neural framing for an FTP data channel, define an in-path rule </a>with the destination port <span class="Bold" style="font-weight: normal">20</span> and set its data reduction policy. To configure neural framing for a MAPI data channel, define an in-path rule with the destination port <span class="Bold" style="font-weight: normal">7830</span> and set its data reduction policy.</div>
          </td>
        </tr>
        <tr>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 1px; border-right-color: none; border-right-style: none; border-right-width: 0.0pt; border-top-color: #000000; border-top-style: solid; border-top-width: 1px; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top">
            <div class="CellBody"><a name="374916">WAN Visibility Mode</a></div>
          </td>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 1px; border-left-color: none; border-left-style: none; border-left-width: 0.0pt; border-top-color: #000000; border-top-style: solid; border-top-width: 1px; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top">
            <div class="CellBody"><a name="374919">Enables WAN visibility, which pertains to how packets traversing the WAN are </a>addressed. RiOS v5.0 or later offers three types of WAN visibility: correct addressing, port transparency, and full address transparency. </div>
            <div class="CellBody"><a name="374927">You configure WAN visibility on the client-side Steelhead appliance (where the </a>connection is initiated). The server-side Steelhead appliance must also support WAN visibility (RiOS v5.0 or later). </div>
            <div class="CellBody"><a name="374934">Select one of the following modes from the drop-down list: </a></div>
            <li class="CellBullet"><span class="Bold"><a name="374936">Correct Addressing</a></span><span class="Bold" style="font-weight: normal"> - </span>Turns WAN visibility off. Correct addressing uses Steelhead appliance IP addresses and port numbers in the TCP/IP packet header fields for optimized traffic in both directions across the WAN. This is the default setting. </li>
            <li class="CellBullet"><span class="Bold"><a name="374941">Port Transparency</a></span><span class="Bold" style="font-weight: normal"> - </span>Port address transparency preserves your server port numbers in the TCP/IP header fields for optimized traffic in both directions across the WAN. Traffic is optimized while the server port number in the TCP/IP header field appears to be unchanged. Routers and network monitoring devices deployed in the WAN segment between the communicating Steelhead appliances can view these preserved fields. </li>
            <div class="CellIndent1"><a name="374946">Use port transparency if you want to manage and enforce QoS policies that </a>are based on destination ports. If your WAN router is following traffic classification rules written in terms of client and network addresses, port transparency enables your routers to use existing rules to classify the traffic without any changes. </div>
            <div class="CellIndent1"><a name="374947">Port transparency enables network analyzers deployed within the WAN </a>(between the Steelhead appliances) to monitor network activity and to capture statistics for reporting by inspecting traffic according to its original TCP port number.</div>
            <div class="CellIndent1"><a name="374951">Port transparency does not require dedicated port configurations on your </a>Steelhead appliances.</div>
            <div class="CellNote">
              <span class="Bold">Note: </span><a name="374955"> Port transparency only provides server port visibility. It does not provide </a>client and server IP address visibility, nor does it provide client port visibility.</div>
            <li class="CellBullet"><span class="Bold"><a name="374957">Full Transparency</a></span><span class="Bold" style="font-weight: normal"> - </span>Full address transparency preserves your client and server IP addresses and port numbers in the TCP/IP header fields for optimized traffic in both directions across the WAN. It also preserves VLAN tags. Traffic is optimized while these TCP/IP header fields appear to be unchanged. Routers and network monitoring devices deployed in the WAN segment between the communicating Steelhead appliances can view these preserved fields. </li>
            <div class="CellBody"><a name="374962">If both port transparency and full address transparency are acceptable </a>solutions, port transparency is preferable. Port transparency avoids potential networking risks that are inherent to enabling full address transparency. For details, see the <span class="book_title">Riverbed Deployment Guide</span>. </div>
            <div class="CellBody"><a name="374966">However, if you must see your client or server IP addresses across the WAN, </a>full transparency is your only configuration option. </div>
            <div class="CellImportant">
              <span class="Bold">Important: </span><a name="374967"> Enabling full address transparency requires symmetrical traffic </a>flows between the client and server. If any asymmetry exists on the network, enabling full address transparency might yield unexpected results, up to and including loss of connectivity. For details, see the <span class="book_title">Riverbed Deployment Guide</span>. </div>
          </td>
        </tr>
        <tr>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 1px; border-right-color: none; border-right-style: none; border-right-width: 0.0pt; border-top-color: #000000; border-top-style: solid; border-top-width: 1px; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top">
            <div class="CellBody"><a name="374972">WAN Visibility Mode (</a><span class="Emphasis">continued</span>)</div>
          </td>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 1px; border-left-color: none; border-left-style: none; border-left-width: 0.0pt; border-top-color: #000000; border-top-style: solid; border-top-width: 1px; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top">
            <div class="CellBody"><a name="374977">RiOS v6.0 and later includes an option for using Full Transparency with a </a>stateful firewall. A stateful firewall examines packet headers, stores information, and then validates subsequent packets against this information. If your system uses a stateful firewall, the following option is available:</div>
            <li class="CellBullet"><span class="Bold"><a name="374978">Full Transparency with Reset</a></span><span class="Bold" style="font-weight: normal"> - </span>Enables full address and port transparency and also sends a forward reset between receiving the probe response and sending the transparent inner channel SYN. This ensures the firewall does not block inner transparent connections because of information stored in the probe connection. The forward reset is necessary because the probe connection and inner connection use the same IP addresses and ports and both map to the same firewall connection. The reset clears the probe connection created by the Steelhead appliance and allows for the full transparent inner connection to traverse the firewall.<span style="font-family: &quot;Times New Roman&quot;; font-size: 12.0pt"> </span>Both the client-side and server-side Steelhead appliances must be running RiOS v6.0 or later.</li>
            <div class="CellBody"><span class="Bold"><a name="374988">Notes:</a></span><span class="Bold" style="font-weight: normal"> </span></div>
            <li class="CellBullet"><a name="374989">For details on configuring WAN visibility and its implications, see the </a><span class="book_title">Riverbed Deployment Guide</span>.</li>
            <li class="CellBullet"><a name="374993">WAN visibility works with auto-discover in-path rules only. It does not </a>work with fixed-target rules or server-side out-of-path Steelhead appliance configurations.</li>
            <li class="CellBullet"><a name="374997">To turn full transparency on globally by default, create an in-path auto-</a>discover rule, select <span class="Bold" style="font-weight: normal">Full</span>, and place it above the default in-path rule and after the Secure, Interactive, and RBT-Proto rules.</li>
            <li class="CellBullet"><a name="375001">You can configure a Steelhead appliance for WAN visibility even if the </a>server-side Steelhead appliance does not support it, but the connection is not transparent.</li>
            <li class="CellBullet"><a name="375005">You can enable full transparency for servers in a specific IP address range </a>and you can enable port transparency on a specific server. For details, see the <span class="book_title">Riverbed Deployment Guide</span>. </li>
            <li class="CellBullet"><a name="375009">The Top Talkers report displays statistics on the most active, heaviest users </a>of WAN bandwidth, providing some WAN visibility without enabling a WAN Visibility Mode.</li>
          </td>
        </tr>
        <tr>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 1px; border-right-color: none; border-right-style: none; border-right-width: 0.0pt; border-top-color: #000000; border-top-style: solid; border-top-width: 1px; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top">
            <div class="CellBody"><a name="375011">Position</a></div>
          </td>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 1px; border-left-color: none; border-left-style: none; border-left-width: 0.0pt; border-top-color: #000000; border-top-style: solid; border-top-width: 1px; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top">
            <div class="CellBody"><a name="375013">Select Start, End, or a rule number from the drop-down list. Steelhead </a>appliances evaluate rules in numerical order starting with rule 1. If the conditions set in the rule match, then the rule is applied, and the system moves on to the next packet. If the conditions set in the rule do not match, the system consults the next rule: for example, if the conditions of rule 1 do not match, rule 2 is consulted. If rule 2 matches the conditions, it is applied, and no further rules are consulted.</div>
            <div class="CellBody"><a name="375014">In general, list rules in the following order:</a></div>
            <div class="CellBody"><a name="375015">1. Deny 2. Discard 3. Pass-through 4. Fixed-target 5. Auto-Discover</a></div>
            <div class="CellBody"><a name="375016">Note: The default rule, Auto-Discover, which optimizes all remaining traffic </a>that has not been selected by another rule, cannot be removed and is always listed last.</div>
          </td>
        </tr>
        <tr>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 1px; border-right-color: none; border-right-style: none; border-right-width: 0.0pt; border-top-color: #000000; border-top-style: solid; border-top-width: 1px; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top">
            <div class="CellBody"><a name="375018">Description</a></div>
          </td>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 1px; border-left-color: none; border-left-style: none; border-left-width: 0.0pt; border-top-color: #000000; border-top-style: solid; border-top-width: 1px; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top">
            <div class="CellBody"><a name="375020">Describe the rule to facilitate administration.</a></div>
          </td>
        </tr>
        <tr>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 1px; border-right-color: none; border-right-style: none; border-right-width: 0.0pt; border-top-color: #000000; border-top-style: solid; border-top-width: 1px; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top">
            <div class="CellBody"><a name="375022">Enable Rule</a></div>
          </td>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 1px; border-left-color: none; border-left-style: none; border-left-width: 0.0pt; border-top-color: #000000; border-top-style: solid; border-top-width: 1px; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top">
            <div class="CellBody"><a name="375024">Select to enable the in-path rule.</a></div>
          </td>
        </tr>
        <tr>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 1px; border-right-color: none; border-right-style: none; border-right-width: 0.0pt; border-top-color: #000000; border-top-style: solid; border-top-width: 1px; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top">
            <div class="CellBody"><a name="375026">Add</a></div>
          </td>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 1px; border-left-color: none; border-left-style: none; border-left-width: 0.0pt; border-top-color: #000000; border-top-style: solid; border-top-width: 1px; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top">
            <div class="CellBody"><a name="375031">Adds the rule to the list. The Management Console redisplays the In-Path </a>Rules table and applies your modifications to the running configuration, which is stored in memory.</div>
          </td>
        </tr>
        <tr>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 1px; border-right-color: none; border-right-style: none; border-right-width: 0.0pt; border-top-color: #000000; border-top-style: solid; border-top-width: 1px; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top">
            <div class="CellBody"><a name="375033">Remove Selected Rules</a></div>
          </td>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 1px; border-left-color: none; border-left-style: none; border-left-width: 0.0pt; border-top-color: #000000; border-top-style: solid; border-top-width: 1px; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top">
            <div class="CellBody"><a name="375035">Select the check box next to the name and click </a><span style="font-weight: bold">Remove Selected Rules</span>.</div>
          </td>
        </tr>
        <tr>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 1px; border-right-color: none; border-right-style: none; border-right-width: 0.0pt; border-top-color: #000000; border-top-style: solid; border-top-width: 1px; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top">
            <div class="CellBody"><a name="375037">Move Selected Rules</a></div>
          </td>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 1px; border-left-color: none; border-left-style: none; border-left-width: 0.0pt; border-top-color: #000000; border-top-style: solid; border-top-width: 1px; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top">
            <div class="CellBody"><a name="375039">Moves the selected rules. Click the arrow next to the desired rule position; the </a>rule moves to the new position.</div>
          </td>
        </tr>
      </table>
      <div class="Tip">
        <span class="Bold">Tip: </span><a name="322853">The default rule, Auto, which optimizes all remaining traffic that has not been selected by another rule, cannot be </a>removed and is always listed last.</div>
      <div class="HeadingProcedure"><span class="Bold"><a name="368237">To edit an in-path rule</a></span> </div>
      <div class="Step1_outer" style="margin-left: 0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="Step1_inner" style="width: 16.128pt; white-space: nowrap;">
                <span class="Bold">1.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="Step1_inner"><a name="322855">Choose Configure &gt; Optimization &gt; In-Path Rules to display the In-Path Rules page.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="Step_outer" style="margin-left: 0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="Step_inner" style="width: 16.128pt; white-space: nowrap;">
                <span class="Bold">2.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="Step_inner"><a name="322856">Select the rule number in the rule list.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="Step_outer" style="margin-left: 0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="Step_inner" style="width: 16.128pt; white-space: nowrap;">
                <span class="Bold">3.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="Step_inner"><a name="322857">Edit the rule. </a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="Step_outer" style="margin-left: 0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="Step_inner" style="width: 16.128pt; white-space: nowrap;">
                <span class="Bold">4.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="Step_inner"><a name="322858">Click </a><span class="Bold">Save </span>to save your settings permanently.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="Body"><a name="322862">After the Management Console has applied your settings, you can verify whether changes have had the </a>desired effect by reviewing related reports. When you have verified appropriate changes, you can write the active configuration that is stored in memory to the active configuration file (or you can save it as any filename you choose). For details, see <span class="xref"><a href="javascript:WWHClickedPopup('cx_test', 'setupConfig.html#281818', '');" title="Managing Configuration Files">Managing Configuration Files</a></span>.</div>
      <div class="Heading4"><span class="Bold"><a name="322866">Related Topics</a></span></div>
      <li class="Bullet"><span class="xref"><a href="javascript:WWHClickedPopup('cx_test', 'in-path-rules.04.2.html#322414', '');" title="In-Path Rules Overview" name="322870">In-Path Rules Overview</a></span></li>
      <li class="Bullet"><span class="xref"><a href="javascript:WWHClickedPopup('cx_test', 'in-path-rules.04.3.html#322453', '');" title="Default In-Path Rules" name="322874">Default In-Path Rules</a></span></li>
      <li class="Bullet"><span class="xref"><a href="javascript:WWHClickedPopup('cx_test', 'setupServiceGeneral.html#249507', '');" title="Configuring General Service Settings" name="322878">Configuring General Service Settings</a></span></li>
      <li class="Bullet"><span class="xref"><a href="javascript:WWHClickedPopup('cx_test', 'setupAdvNet_peering.html#249892', '');" title="Enabling Peering and Configuring Peering Rules" name="322882">Enabling Peering and Configuring Peering Rules</a></span></li>
      <li class="Bullet"><span class="xref"><a href="javascript:WWHClickedPopup('cx_test', 'setupPortLabels.html#251342', '');" title="Configuring Port Labels" name="322886">Configuring Port Labels</a></span></li>
      <li class="Bullet"><span class="xref"><a href="javascript:WWHClickedPopup('cx_test', 'setupServiceProtocolsHTTP.html#252066', '');" title="Configuring HTTP Optimization" name="322890">Configuring HTTP Optimization</a></span></li>
      <li class="Bullet"><span class="xref"><a href="javascript:WWHClickedPopup('cx_test', 'setupServiceProtocolsSSLPeering.html#222181', '');" title="Configuring Secure Peers" name="322894">Secure Inner Channel Overview</a></span></li>
      <li class="Bullet"><span class="xref"><a href="javascript:WWHClickedPopup('cx_test', 'reportConnections.html#296976', '');" title="Viewing Current Connections" name="322898">Viewing Current Connections</a></span></li>
      <li class="Bullet"><span class="xref"><a href="javascript:WWHClickedPopup('cx_test', 'reportConnectionHistory.html#297562', '');" title="Viewing Connection History" name="322902">Viewing Connection History</a></span></li>
      <div class="Body"><a name="326861">&nbsp;</a></div>
      <script type="text/javascript" language="JavaScript1.2">
        <!--
          // Clear related topics
          //
          WWHClearRelatedTopics();

          document.writeln(WWHRelatedTopicsInlineHTML());
        // -->
      </script>
    </blockquote>
    <hr align="left" />
    <table align="right">
      <tr>
        <td class="WebWorks_Company_Logo_Bottom">
          <a href="http://riverbed.com" target="external_window"><img src="riverbed_logo_without_tagline.jpg" border="0" /></a>
        </td>
      </tr>
    </table>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        document.write(WWHRelatedTopicsDivTag() + WWHPopupDivTag() + WWHALinksDivTag());
      // -->
    </script>
  </body>
</html>