<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=ISO-8859-1" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <!-- MOTW-DISABLED saved from url=(0014)about:internet -->
    <title>Setting Advanced SSL Options</title>
    <link rel="StyleSheet" href="css/ssl.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" />
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/context.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/towwhdir.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/wwhpagef.js"></script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        var  WebWorksRootPath = "";
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        // Set reference to top level help frame
        //
        var  WWHFrame = WWHGetWWHFrame("", true);
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2" src="scripts/expand.js"></script>
  </head>
  <body onload="WWHUpdate();" onunload="WWHUnload();" onkeydown="WWHHandleKeyDown((document.all||document.getElementById||document.layers)?event:null);" onkeypress="WWHHandleKeyPress((document.all||document.getElementById||document.layers)?event:null);" onkeyup="WWHHandleKeyUp((document.all||document.getElementById||document.layers)?event:null);">
    <br />
    <div class="WebWorks_Breadcrumbs" style="text-align: left;">
      <a class="WebWorks_Breadcrumb_Link" href="ssl.08.01.html#222812">Chapter 6	Configuring SSL and a Secure Inner Channel</a> : <a class="WebWorks_Breadcrumb_Link" href="setupServiceProtocolsSSLAdvanced.html#222812">Configuring Advanced and SSL Cipher Settings </a> : Setting Advanced SSL Options</div>
    <hr align="left" />
    <blockquote>
      <div class="Heading2Topic"><a name="222812">Setting Advanced SSL Options</a></div>
      <div class="Body"><a name="222816">You can synchronize the SSL chain certificate configuration, configure </a>Steelhead Mobile for SSL, improve performance for SSL connection establishment, and enable client certificate authentication in the Configure &gt; Optimization &gt; Advanced Settings page. </div>
      <div class="HeadingProcedure"><a name="237329">To set Advanced SSL options</a></div>
      <div class="Step1_outer" style="margin-left: 0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="Step1_inner" style="width: 16.128pt; white-space: nowrap;">
                <span class="Bold">1.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="Step1_inner"><a name="222817">Choose Configure &gt; Optimization &gt; Advanced Settings to display the Advanced Settings page.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="Step_outer" style="margin-left: 0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="Step_inner" style="width: 16.128pt; white-space: nowrap;">
                <span class="Bold">2.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="Step_inner"><a name="222822"> Complete the configuration as described in the following table.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <table class="RegularTable" style="text-align: left; width: 468.87552pt" cellspacing="0" summary="">
        <caption></caption>
        <tr>
          <td style="background-color: #ADBDF2; border-top-color: #000000; border-top-style: solid; border-top-width: 1px; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 104.68728pt">
            <div class="CellHeading"><a name="253669">Control</a></div>
          </td>
          <td style="background-color: #ADBDF2; border-top-color: #000000; border-top-style: solid; border-top-width: 1px; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 364.18824pt">
            <div class="CellHeading"><a name="253671">Description</a></div>
          </td>
        </tr>
        <tr>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 1px; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top">
            <div class="CellBody"><a name="253673">Enable SSL Server </a>Certificate Chain Discovery</div>
          </td>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 1px; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top">
            <div class="CellBody"><a name="253677">Synchronizes the chain certificate configuration on the server-side </a>Steelhead appliance with the chain certificate configuration on the back-end server. The synchronization occurs after a handshake fails between the client-side and server-side Steelhead appliance. By default, this option is disabled.</div>
            <div class="CellBody"><a name="253682">Enable this option when you replace an existing chain certificate on the back-end server </a>with a new chain to ensure that the certificate chain remains in sync on both the server-side Steelhead appliance and the back-end server.</div>
            <div class="CellNote">
              <span class="Bold">Note: </span><a name="253686"> This option never replaces the server certificate. It updates the chain containing the </a>intermediate certificates and the root certificate in the client context. </div>
          </td>
        </tr>
        <tr>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 1px; border-top-color: #000000; border-top-style: solid; border-top-width: 1px; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top">
            <div class="CellBody"><a name="253688">Steelhead Mobile </a>Security Mode</div>
          </td>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 1px; border-top-color: #000000; border-top-style: solid; border-top-width: 1px; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top">
            <div class="CellBody"><a name="253693">On the server-side </a>Steelhead appliance, select one of the following security modes:</div>
            <li class="CellBullet"><span style="font-weight: bold"><a name="253698">High Security Mode</a></span><span class="Bold" style="font-weight: normal"> - </span>Enforces the advanced SSL protocol on the Steelhead Mobile Clients for increased security (v5.5.x or later). </li>
            <li class="CellBullet"><span style="font-weight: bold"><a name="253702">Mixed Security Mode</a></span><span class="Bold" style="font-weight: normal"> - </span>Allows Steelhead Mobile clients to run in any SSL mode.</li>
            <div class="CellNote">
              <span class="Bold">Note: </span><a name="253707"> This option does not affect </a>Steelhead appliance-to-Steelhead appliance operation.</div>
          </td>
        </tr>
        <tr>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 1px; border-top-color: #000000; border-top-style: solid; border-top-width: 1px; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top">
            <div class="CellBody"><a name="253714">Enable Distributed SSL </a>Termination</div>
          </td>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 1px; border-top-color: #000000; border-top-style: solid; border-top-width: 1px; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top">
            <div class="CellBody"><a name="253718">Enables reuse of the original session on a client-side </a>Steelhead appliance when the client reconnects to an SSL server. Reusing the session provides two benefits: it lessens the CPU load because it eliminates expensive asymmetric key operations and it shortens the key negotiation process by avoiding WAN roundtrips to the server. By default, this option is disabled. Both the client-side and server-side Steelheads must be configured to optimize SSL traffic.</div>
            <li class="CellBullet"><span style="font-weight: bold"><a name="253726">Timeout</a></span><span class="Bold" style="font-weight: normal"> - </span>Specify the amount of time the client can reuse a session with an SSL server after the initial connection ends. The range is 6 minutes to 24 hours. The default value is 10 hours. </li>
            <div class="CellBody"><a name="253727">Enabling this option requires an optimization service restart.</a></div>
          </td>
        </tr>
        <tr>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 1px; border-top-color: #000000; border-top-style: solid; border-top-width: 1px; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top">
            <div class="CellBody"><a name="253730">Enable Client </a>Certificate Support</div>
          </td>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 1px; border-top-color: #000000; border-top-style: solid; border-top-width: 1px; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top">
            <div class="CellBody"><a name="253732">Enables acceleration of SSL traffic to those SSL servers that authenticate SSL clients. The </a>SSL server verifies the SSL client certificate. In the client authentication SSL handshake, each client has a unique client certificate and the SSL server, in most cases, maintains the state that is specific to each client when answering the client's requests. The SSL server must receive exactly the same certificate that is originally issued for a client on all the connections between the client and the server. Typically the client's unique certificate and private key are stored on a smart card, such as a Common Access Card (CAC), or on a similar location that is inaccessible to other devices on the network. </div>
            <div class="CellBody"><a name="253735">Enabling the client authentication feature allows </a>Steelhead appliances to compute the encryption key while the SSL server continues to authenticate the original SSL client exactly as it would without the Steelhead appliances. The server-side Steelhead appliance observes the SSL handshake messages as they go back and forth. With access to the SSL server's private key, the Steelhead appliance computes the session key exactly as the SSL server does. The SSL server continues to perform the actual verification of the client, so any dependencies on the uniqueness of the client certificate for correct operation of the application are met. Because the Steelhead appliance does not modify any of the certificates (or the handshake messages) exchanged between the client and the server, there is no change to their trust model. The client and server continue to trust the same set of Certificate Authorities as they did without the Steelhead appliances accelerating their traffic. </div>
            <div class="CellNote">
              <span class="Bold">Note: </span><a name="253752">If the data center has a mixed environment with a few SSL servers that authenticate </a>clients along with those that do not authenticate clients, Riverbed recommends enabling client authentication. </div>
            <div class="CellHeading"><a name="253756">Requirements</a></div>
            <li class="CellBullet"><a name="253759">Both the client-side and the server-side </a>Steelhead appliance must be running RiOS v6.5.</li>
            <li class="CellBullet"><a name="253766">Enable client certificate support on the server-side </a>Steelhead appliance.</li>
            <li class="CellBullet"><a name="253770">The server-side </a>Steelhead appliance must have access to the exact private key used by the SSL server.</li>
            <li class="CellBullet"><a name="253772">The SSL server must be configured to ask for client certificates.</a></li>
            <li class="CellBullet"><a name="253775">The </a>Steelhead appliance must have a compatible cipher chosen by the server.</li>
            <li class="CellBullet"><a name="253777">SSL sessions that reuse previous secrets that are unknown to the Steelhead appliance </a>cannot be decrypted.</li>
            <li class="CellBullet"><a name="253778">Client-side certificates with renegotiation handshakes are not supported.</a></li>
            <li class="CellBullet"><a name="253779">Client certificate supports the RSA key exchange only. It does not support the Diffie-</a>Hellman key exchange.</li>
            <div class="CellHeading"><a name="253780">Basic Steps</a></div>
            <div class="CellBody"><a name="253781">The basic steps to enable client authentication are:</a></div>
            <div class="CellStep1_outer" style="margin-left: 0pt">
              <table border="0" cellspacing="0" cellpadding="0" summary="">
                <tr style="vertical-align: baseline;">
                  <td>
                    <div class="CellStep1_inner" style="width: 16.128pt; white-space: nowrap;">
                      <span class="Bold">1.	</span>
                    </div>
                  </td>
                  <td width="100%">
                    <div class="CellStep1_inner"><a name="253782">Perform the basic steps to enable SSL optimization (described in Configuring SSL </a>Server Certificates and Certificate Authorities).</div>
                  </td>
                </tr>
              </table>
            </div>
            <div class="CellStep_outer" style="margin-left: 0pt">
              <table border="0" cellspacing="0" cellpadding="0" summary="">
                <tr style="vertical-align: baseline;">
                  <td>
                    <div class="CellStep_inner" style="width: 16.128pt; white-space: nowrap;">
                      <span class="Bold">2.	</span>
                    </div>
                  </td>
                  <td width="100%">
                    <div class="CellStep_inner"><a name="253785">On the server-side </a>Steelhead appliance, choose Configure &gt; Optimization &gt; Advanced Settings, select Enable Client Certificate Support, and click <span style="font-weight: bold">Apply</span>. </div>
                  </td>
                </tr>
              </table>
            </div>
            <div class="CellStep_outer" style="margin-left: 0pt">
              <table border="0" cellspacing="0" cellpadding="0" summary="">
                <tr style="vertical-align: baseline;">
                  <td>
                    <div class="CellStep_inner" style="width: 16.128pt; white-space: nowrap;">
                      <span class="Bold">3.	</span>
                    </div>
                  </td>
                  <td width="100%">
                    <div class="CellStep_inner"><a name="253787">Choose Configure &gt; Optimization&gt; SSL Main Settings, import the private key and </a>certificate used by the SSL server to the server-side Steelhead appliance, and click <span style="font-weight: bold">Save</span> to save the configuration. You do not need to restart the optimization service.</div>
                  </td>
                </tr>
              </table>
            </div>
            <div class="CellHeading"><a name="253791">Verification</a></div>
            <div class="CellBody"><a name="253794">To verify client authentication, on the server-side </a>Steelhead appliance, check the Discovered Server (Optimizable) table in the Configure &gt; Optimization &gt; SSL Main Settings page. Optimizable servers that are using client authentication appear as optimizable. For servers that are not using client authentication, the server appears in the Discovered Server (bypassed, not optimizable) table with the reason &#8220;No proxy certificate configured for the server."</div>
          </td>
        </tr>
      </table>
      <div class="Step_outer" style="margin-left: 0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="Step_inner" style="width: 16.128pt; white-space: nowrap;">
                <span class="Bold">4.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="Step_inner"><a name="222885">	</a>			Click <span class="Bold">Apply</span> to apply your settings.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="Step_outer" style="margin-left: 0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="Step_inner" style="width: 16.128pt; white-space: nowrap;">
                <span class="Bold">5.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="Step_inner"><a name="222886">Click </a><span style="font-weight: bold">Save</span><span class="Bold"> </span>to save your settings permanently.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="Step_outer" style="margin-left: 0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="Step_inner" style="width: 16.128pt; white-space: nowrap;">
                <span class="Bold">6.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="Step_inner"><a name="222890">If you have enabled Client Side Session Reuse you need to restart the </a>Steelhead service. For details, see <span class="xref"><a href="javascript:WWHClickedPopup('Steelhead_Management_Console_Online_Help_v7.0', 'setupAppliance_service.html#281155', '');" title="Starting and Stopping the Optimization Service">Starting and Stopping the Optimization Service</a></span>. </div>
            </td>
          </tr>
        </table>
      </div>
      <div class="Note">
        <span class="Bold">Note: </span><a name="222899">For details on </a>Steelhead Mobile security mode and client-side session reuse, see the <span class="book_title">R</span><span class="book_title">iverbed Deployment Guide</span>.</div>
      <script type="text/javascript" language="JavaScript1.2">
        <!--
          // Clear related topics
          //
          WWHClearRelatedTopics();

          document.writeln(WWHRelatedTopicsInlineHTML());
        // -->
      </script>
    </blockquote>
    <hr align="left" />
    <table align="right">
      <tr>
        <td class="WebWorks_Company_Logo_Bottom">
          <a href="http://riverbed.com" target="external_window"><img src="riverbed_logo_with_tagline.jpg" border="0" /></a>
        </td>
      </tr>
    </table>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        document.write(WWHRelatedTopicsDivTag() + WWHPopupDivTag() + WWHALinksDivTag());
      // -->
    </script>
  </body>
</html>